From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Daniel Ju <41210545+daniel-ju@users.noreply.github.com>
Date: Fri, 20 Nov 2020 18:06:54 -0800
Subject: MSFT-PATCH: Changes to the CLDR-to-ICU data build tool for
 MS-ICU/Windows.


diff --git a/icu/icu4c/source/data/build.xml b/icu/icu4c/source/data/build.xml
index ffee73d34b8d7203923af348e6c3e04a829571ea..13e76962d35e692bc967b930830167464adf8b99 100644
--- a/icu/icu4c/source/data/build.xml
+++ b/icu/icu4c/source/data/build.xml
@@ -43,7 +43,8 @@
         </condition>
         <fail unless="is.cldr.classes.set" message="CLDR classes not found in ${cldrtools.dir}. Please either set the CLDR_CLASSES environment variable or build cldr.jar."/>
 
-        <property name="env.CLDR_TMP_DIR" location="${env.CLDR_DIR}/../cldr-aux" /> <!-- Hack: see CLDRPaths -->
+        <!-- MSFT-Change: Modify the CLDR_TMP_DIR path. -->
+        <property name="env.CLDR_TMP_DIR" location="${env.CLDR_DIR}/../cldr-staging" /> <!-- Hack: see CLDRPaths -->
         <property name="cldr.prod.dir" location="${env.CLDR_TMP_DIR}/production/" />
         <echo message="java home: ${java.home}"/>
         <echo message="java version: ${java.version}"/>
diff --git a/icu/tools/cldr/cldr-to-icu/build-icu-data.xml b/icu/tools/cldr/cldr-to-icu/build-icu-data.xml
index c5b143c2a6e5dc841868aabf7ff8296ea32009a5..a524e3dfbeb32e1d98069fb9696ebd1c1f9d8805 100644
--- a/icu/tools/cldr/cldr-to-icu/build-icu-data.xml
+++ b/icu/tools/cldr/cldr-to-icu/build-icu-data.xml
@@ -86,16 +86,19 @@
         <!-- TODO: Find out what common use cases are and use them. -->
         <property name="outputTypes" value=""/>
 
+        <!-- MSFT-Change: Ensure we have clean outputs -->
         <!-- Override to force the 'clean' task to delete files it cannot determine to be
              auto-generated by this tool. This is useful if the file header changes since
              the heading is what's used to recognize auto-generated files. -->
-        <property name="forceDelete" value="false"/>
+        <property name="forceDelete" value="true"/>
     </target>
 
     <!-- Build a standalone JAR which is called by Ant (and which avoids needing to mess
          about making Ant know the Maven class-path). -->
     <target name="prepare-jar" depends="init-args">
-        <exec executable="mvn" searchpath="true" failonerror="true">
+        <!-- MSFT-Change: Windows only searches for .exe executables by default, so add the .cmd extension
+             See: https://ant.apache.org/manual/Tasks/exec.html -->
+        <exec executable="mvn.cmd" searchpath="true" failonerror="true">
             <arg value="compile"/>
         </exec>
     </target>
